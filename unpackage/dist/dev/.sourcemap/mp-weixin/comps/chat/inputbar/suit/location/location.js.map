{"version":3,"sources":["webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/location/location.vue?a39b","webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/location/location.vue?16a7","webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/location/location.vue?bda4","webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/location/location.vue?9530","webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/location/location.vue"],"names":["WebIM","require","msgType","msgStorage","data","components","props","username","type","Object","default","chatType","String","SINGLE_CHAT","methods","isGroupChat","CHAT_ROOM","getSendToParam","groupId","your","sendLocation","me","wx","authorize","scope","fail","uni","showToast","title","icon","success","chooseLocation","console","log","arguments","complete","respData","id","conn","getUniqueId","msg","message","LOCATION","set","from","myName","to","roomType","lng","longitude","lat","latitude","addr","address","serverMsgId","setGroup","send","body","obj","IMAGE","saveSendMsg","evt","saveMsg"],"mappings":"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","file":"comps/chat/inputbar/suit/location/location.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./location.vue?vue&type=template&id=22d159a8&\"\nvar renderjs\nimport script from \"./location.vue?vue&type=script&lang=js&\"\nexport * from \"./location.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/location/location.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./location.vue?vue&type=template&id=22d159a8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./location.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./location.vue?vue&type=script&lang=js&\"","//\n//\n//\n\nlet WebIM = require(\"../../../../../utils/WebIM\")[\"default\"];\nlet msgType = require(\"../../../msgtype\");\nlet msgStorage = require(\"../../../msgstorage\");\nexport default {\n  data() {\n    return {};\n  },\n\n  components: {},\n  props: {\n    username: {\n      type: Object,\n      default: () => ({})\n    },\n    chatType: {\n      type: String,\n      default: msgType.chatType.SINGLE_CHAT\n    }\n  },\n  methods: {\n    isGroupChat() {\n      return this.chatType == msgType.chatType.CHAT_ROOM;\n    },\n\n    getSendToParam() {\n      return this.isGroupChat() ? this.username.groupId : this.username.your;\n    },\n\n    sendLocation() {\n      var me = this;\n      wx.authorize({\n        scope: \"scope.userLocation\",\n\n        fail() {\n          uni.showToast({\n            title: \"已拒绝\",\n            icon: \"none\"\n          });\n        },\n\n        success() {\n          wx.chooseLocation({\n            fail() {\n              console.log(arguments);\n            },\n\n            complete() {\n              console.log(arguments);\n            },\n\n            success(respData) {\n              var id = WebIM.conn.getUniqueId();\n              var msg = new WebIM.message(msgType.LOCATION, id);\n              msg.set({\n                // location 需要消息值吗？写死不行？\n                msg: \"\",\n                from: me.username.myName,\n                to: me.getSendToParam(),\n                roomType: false,\n                lng: respData.longitude,\n                lat: respData.latitude,\n                addr: respData.address,\n                chatType: me.chatType,\n\n                success(id, serverMsgId) {}\n\n              });\n\n              if (me.chatType == msgType.chatType.CHAT_ROOM) {\n                msg.setGroup(\"groupchat\");\n              }\n\n              WebIM.conn.send(msg.body);\n                let obj = {\n                  msg: msg,\n                  type: msgType.IMAGE\n                }\n              me.saveSendMsg(obj);\n            }\n\n          });\n        }\n\n      });\n    },\n    saveSendMsg(evt) {\n      msgStorage.saveMsg(evt.msg, evt.type);\n    }\n\n  }\n};\n"],"sourceRoot":""}